{% extends "base.html" %}

{% block extra_css %}
    <link rel="stylesheet" href="/static/styles/admin_web_configs.css">
{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h1><i class="fas fa-file-alt"></i> Pages Management</h1>
        <div class="admin-breadcrumb">
            <a href="/">Home</a> / <a href="/admin">Admin Panel</a> / Pages
        </div>
    </div>

    <div id="adminAlerts"></div>

    <div class="admin-content">
        <div class="admin-card">
            <div class="controls-header">
                <h2>Page Controls</h2>
                <button id="createPageBtn" class="btn-primary">
                    <i class="fas fa-plus"></i> Add New Page
                </button>
            </div>
            <div class="filters">
                <label>Filter by status:</label>
                <select id="stateFilter">
                    <option value="-1">All Pages</option>
                    <option value="1">Active in Navigation</option>
                    <option value="0">Hidden from Navigation</option>
                </select>
            </div>
        </div>

        <div class="admin-card">
            <h2>Website Pages</h2>
            <div id="pagesList" class="pages-container">
                <div class="loading-text">
                    <i class="fas fa-spinner fa-spin"></i> Loading pages...
                </div>
            </div>
        </div>
    </div>
</div>

<div id="pageModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">Add New Page</h3>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <form id="pageForm">
                <input type="hidden" id="pageId">

                <div class="form-group">
                    <label for="pageName">Page URL *</label>
                    <input type="text" id="pageName" name="page_name" required
                           placeholder="e.g., about, services, contact">
                    <small>URL-friendly name (no spaces, special characters). This should match an existing route in
                        app.py</small>
                </div>

                <div class="form-group">
                    <label for="pageDisplay">Display Name *</label>
                    <input type="text" id="pageDisplay" name="page_display" required
                           placeholder="e.g., About Us, Our Services, Contact">
                    <small>Name that will appear in the navigation menu</small>
                </div>

                <div class="form-group">
                    <label for="pageState">Navigation Status</label>
                    <select id="pageState" name="state">
                        <option value="1">Visible in navigation</option>
                        <option value="0">Hidden from navigation</option>
                    </select>
                    <small>Hidden pages are still accessible via direct URL</small>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn-primary" id="submitBtn">
                        <i class="fas fa-save"></i> Save Page
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="deleteModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Confirm Deletion</h3>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete the page "<span id="deletePageName"></span>"?</p>
            <p class="warning-text">This will remove it from navigation management!</p>
            <div class="form-actions">
                <button type="button" class="btn-secondary" id="cancelDeleteBtn">Cancel</button>
                <button type="button" class="btn-danger" id="confirmDeleteBtn">
                    <i class="fas fa-trash"></i> Delete Page
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/admin_web_configs.js"></script>
{% endblock %}