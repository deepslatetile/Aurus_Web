{% extends "base.html" %}

{% block extra_css %}
    <link rel="stylesheet" href="/static/styles/admin_payments.css">
{% endblock %}

{% block content %}
<div class="admin-panel">
    <div class="admin-header">
        <h1>Payments</h1>
        <div class="admin-breadcrumb">
            <a href="/">Home</a> / <a href="/admin">Admin Panel</a> /
            Payments
        </div>
    </div>

    <div class="payment-section">
        <h2>Process Booking Payment</h2>
        <div class="payment-form">
            <div class="form-group">
                <label for="bookingId">Booking ID:</label>
                <input type="text" id="bookingId" placeholder="Enter booking ID...">
                <button onclick="loadBookingInfo()" class="load-btn">
                    <i class="fas fa-search"></i> Load Booking
                </button>
            </div>

            <div id="bookingInfo" class="booking-info" style="display: none;">
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">Flight:</span>
                        <span id="infoFlight"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">Passenger:</span>
                        <span id="infoPassenger"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">Seat:</span>
                        <span id="infoSeat"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">Services Total:</span>
                        <span id="infoServicesTotal">$0.00</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="paymentAmount">Payment Amount ($):</label>
                <input type="number" id="paymentAmount" step="0.01" placeholder="Enter amount...">
            </div>

            <div class="form-group">
                <label for="paymentDescription">Description:</label>
                <input type="text" id="paymentDescription" placeholder="Payment description...">
            </div>

            <button onclick="processBookingPayment()" class="process-btn">
                <i class="fas fa-credit-card"></i> Process Payment
            </button>
        </div>
    </div>

    <div class="payment-section">
        <h2>User Payment/Refund</h2>
        <div class="payment-form">
            <div class="form-group">
                <label for="userIdentifier">User ID / Virtual ID / Social ID:</label>
                <input type="text" id="userIdentifier" placeholder="Enter user identifier...">
                <button onclick="loadUserInfo()" class="load-btn">
                    <i class="fas fa-search"></i> Load User
                </button>
            </div>

            <div id="userInfo" class="user-info" style="display: none;">
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">Nickname:</span>
                        <span id="infoNickname"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">Current Miles:</span>
                        <span id="infoMiles">0</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="userAmount">Amount (positive for refund, negative for payment):</label>
                <input type="number" id="userAmount" step="10" placeholder="Enter amount...">
            </div>

            <div class="form-group">
                <label for="userDescription">Description:</label>
                <input type="text" id="userDescription" placeholder="Transaction description...">
            </div>

            <button onclick="processUserPayment()" class="process-btn">
                <i class="fas fa-exchange-alt"></i> Process User Transaction
            </button>
        </div>
    </div>

    <div class="payment-section">
        <h2>Flight Mass Payment</h2>
        <div class="payment-form">
            <div class="form-group">
                <label for="flightNumber">Flight Number:</label>
                <input type="text" id="flightNumber" placeholder="Enter flight number...">
            </div>

            <div class="form-group">
                <label for="massAmount">Amount per Passenger ($):</label>
                <input type="number" id="massAmount" step="0.01" placeholder="Enter amount...">
            </div>

            <div class="form-group">
                <label for="massDescription">Description:</label>
                <input type="text" id="massDescription" placeholder="Payment description...">
            </div>

            <button onclick="processMassPayment()" class="process-btn mass-btn">
                <i class="fas fa-users"></i> Process Mass Payment
            </button>
        </div>
    </div>

    <div class="payment-section">
        <h2>Transactions History</h2>
        <div class="transactions-controls">
            <div class="form-group">
                <label for="searchUserId">Search by User ID:</label>
                <input type="text" id="searchUserId" placeholder="Enter user ID...">
                <button onclick="loadUserTransactions()" class="load-btn">
                    <i class="fas fa-search"></i> Load Transactions
                </button>
            </div>
        </div>
        <div id="transactionsList" class="transactions-list">

        </div>
    </div>
</div>

<script src="/static/js/admin_payments.js"></script>
{% endblock %}